<story-context id=".bmad/bmm/workflows/4-implementation/story-context/template" v="1.0">
  <metadata>
    <epicId>epic-2</epicId>
    <storyId>2.3</storyId>
    <title>Difficulty Selection UI</title>
    <status>drafted</status>
    <generatedAt>2025-12-12</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>docs/sprint-artifacts/2-3-difficulty-selection-ui.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>user</asA>
    <iWant>to select the desired summary difficulty before generation</iWant>
    <soThat>I can control the level of detail</soThat>
  </story>

  <acceptanceCriteria>
    1.  Given the input screen, when I am about to generate a summary, then I can select 'easy', 'medium', or 'hard' difficulty.
    2.  Given a difficulty is selected, when I click "Generate", then the selected difficulty is sent to the backend.
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc path="docs/prd-QuizZum-2025-12-05.md" title="QuizZum - Product Requirements Document">
        <section name="Functional Requirements">
          <snippet>FR-006: (MVP) Users can select the desired difficulty level for summaries.</snippet>
        </section>
      </doc>
      <doc path="docs/epics-QuizZum-2025-12-05.md" title="QuizZum - Epic Breakdown">
        <section name="Epic 2: Multi-level Summarization">
          <snippet>Goal: Enable users to generate and consume multi-level summaries of their content.</snippet>
        </section>
        <section name="Story 2.3: (MVP) Difficulty Selection UI">
          <snippet>User Story: As a user, I want to select the desired summary difficulty before generation, so that I can control the level of detail. Acceptance Criteria: Select 'easy', 'medium', or 'hard' difficulty; Selected difficulty sent to backend.</snippet>
        </section>
      </doc>
      <doc path="docs/architecture.md" title="Architecture">
        <section name="Technology Stack Details - Core Technologies">
          <snippet>Frontend: Next.js (JavaScript), React, Tailwind CSS, Headless UI.</snippet>
        </section>
        <section name="API Contracts - High-Level API Endpoints">
          <snippet>`POST /api/summarize`: Accepts content ID and a difficulty level, returns a summary.</snippet>
        </section>
      </doc>
      <doc path="docs/sprint-artifacts/tech-spec-epic-epic-2.md" title="Epic Technical Specification: Multi-level Summarization">
        <section name="Detailed Design - Services and Modules">
          <snippet>Frontend: `components/DifficultyToggle.jsx`.</snippet>
        </section>
        <section name="Detailed Design - APIs and Interfaces">
          <snippet>`POST /api/summarize`: Request Body (JSON): `{"content_id": "string", "difficulty": "easy" | "medium" | "hard"}`.</snippet>
        </section>
        <section name="Detailed Design - Workflows and Sequencing">
          <snippet>User Switches Difficulty: A new API call is made to `/api/summarize` with the same `contentId` but the new `difficulty`.</snippet>
        </section>
      </doc>
    </docs>
    <code>
      <code path="nextjs-frontend/src/components/InputForm.jsx" kind="React Component" symbol="InputForm">
        <reason>This existing component will be integrated with the new `DifficultyToggle.jsx`.</reason>
      </code>
      <code path="nextjs-frontend/src/app/(input)/page.jsx" kind="React Page" symbol="InputPage">
        <reason>This page will be modified to display the difficulty selection UI.</reason>
      </code>
      <code path="nextjs-frontend/src/lib/api.js" kind="JavaScript Library" symbol="apiClient">
        <reason>This file will be updated to ensure the `POST /api/summarize` function correctly handles the difficulty parameter.</reason>
      </code>
    </code>
    <dependencies>
      <ecosystem name="Node.js/npm">
        <package name="next" version="latest" />
        <package name="react" version="latest" />
        <package name="tailwindcss" version="latest" />
      </ecosystem>
    </dependencies>
  </artifacts>

  <constraints>
    <constraint type="Architectural">
      <description>Frontend is Next.js (JavaScript) with Tailwind CSS.</description>
    </constraint>
    <constraint type="Architectural">
      <description>Difficulty selection logic must integrate with the existing `POST /api/summarize` backend endpoint.</description>
    </constraint>
    <constraint type="Code Organization">
      <description>Create new file `DifficultyToggle.jsx` in `nextjs-frontend/src/components` and integrate into `InputForm.jsx`.</description>
    </constraint>
    <constraint type="Testing">
      <description>Unit/Component tests for the `DifficultyToggle.jsx` component are required.</description>
    </constraint>
  </constraints>
  <interfaces>
    <interface name="SummarizeAPI" kind="REST endpoint" signature="POST /api/summarize" path="fastapi-backend/app/api/v1/summarize.py">
      <description>The frontend will send the selected difficulty to this endpoint.</description>
    </interface>
  </interfaces>
  <tests>
    <standards>
      <paragraph>Frontend (Next.js) Unit and Component tests will use `Jest` and `React Testing Library`.</paragraph>
    </standards>
    <locations>
      <location kind="frontend_unit" path="nextjs-frontend/src/components/__tests__/DifficultyToggle.test.jsx" />
    </locations>
    <ideas>
      <idea type="Component" priority="P0">
        <description>Verify `DifficultyToggle.jsx` renders all three difficulty options ('easy', 'medium', 'hard').</description>
        <acceptance-criteria ref="1" />
      </idea>
      <idea type="Component" priority="P0">
        <description>Verify `DifficultyToggle.jsx` updates its internal state when a difficulty is selected.</description>
        <acceptance-criteria ref="1" />
      </idea>
      <idea type="Component" priority="P0">
        <description>Verify `DifficultyToggle.jsx` passes the selected difficulty to a callback function when a selection is made, which `InputForm` will then use.</description>
        <acceptance-criteria ref="2" />
      </idea>
    </ideas>
  </tests>
  <validation-report>
    <summary>
      <overall>âœ… PASS: Story Context for Story 2.3 is complete and ready.</overall>
      <criticalIssues>N/A</criticalIssues>
      <recommendedActions>N/A</recommendedActions>
    </summary>
  </validation-report>
</story-context>
